(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[621],{1679:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/artwork/[tokenId]",function(){return n(2041)}])},7327:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(2322),i=n(4107),a=n(6838),o=n(7934),s=n(5125),c=n(2947),u=n(2784),l=n(6995),d=n(3163);function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e){for(var t=arguments,n=function(n){var r=null!=t[n]?t[n]:{},i=Object.keys(r);"function"===typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),i.forEach((function(t){f(e,t,r[t])}))},r=1;r<arguments.length;r++)n(r);return e}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,i,a=[],o=!0,s=!1;try{for(n=n.call(e);!(o=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);o=!0);}catch(c){s=!0,i=c}finally{try{o||null==n.return||n.return()}finally{if(s)throw i}}return a}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3?arguments[3]:void 0,i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=document.createElement("canvas"),o=a.getContext("2d");a.width=4096,a.height=4096,o.imageSmoothingEnabled=!0,o.rect(0,0,a.width,a.height),o.fillStyle=n,o.textAlign="center",o.fill();var s=(0,c.U2)(l.ImageLoader,"/noise-medium3.png");i&&(o.drawImage(s,0,0,a.width/2,a.height/2),o.drawImage(s,a.width/2,0,a.width/2,a.height/2),o.drawImage(s,0,a.height/2,a.width/2,a.height/2),o.drawImage(s,a.width/2,a.height/2,a.width/2,a.height/2)),o.fillStyle=r,o.font="200px Roboto Mono",o.fillText(e,1800,1840),o.font="54px Roboto Mono",o.fillText(t,1800,3960),o.font="54px Roboto Mono",o.fillText("THE DATE",1800,2440);var u=new l.CanvasTexture(a);return u}function m(e){var t=e.dateString,n=e.noteString,i=void 0===n?"":n,o=(0,a.L)("/cube.glb"),s=p(t,i,"#ffffff","#D1D1D1"),c=p(t,i,"#ffffff","#000000",!0),u={clearcoat:.1,clearcoatRoughness:.3,metalness:.5,roughness:.4,color:"white",map:s,metalMap:p(t,i,"#ffffff","#D1D1D1"),roughnessMap:c,normalMap:c,normalScale:new l.Vector2(.3,.3),"normalMap-wrapS":l.RepeatWrapping,"normalMap-wrapT":l.RepeatWrapping,"normalMap-repeat":[100,100],"normalMap-anisotropy":16,transmission:.6,transparent:!1};return(0,r.jsx)("group",{children:(0,r.jsx)("mesh",{geometry:o.nodes.Cube.geometry,scale:[1,1,1],rotation:[-Math.PI/2,0,0],children:(0,r.jsx)("meshPhysicalMaterial",v({},u,{side:l.FrontSide}))})})}function g(e){var t=e.background,n=void 0!==t&&t,r=(0,c.Ky)(),i=r.gl,a=r.scene,o=x((0,c.U2)(d.q,[["px.hdr","nx.hdr","py.hdr","ny.hdr","pz.hdr","nz.hdr"]],(function(e){e.setPath("/pisaHDR/"),e.setDataType(l.UnsignedByteType)})),1)[0];return(0,u.useEffect)((function(){var e=new l.PMREMGenerator(i);e.compileEquirectangularShader();var t=e.fromCubemap(o);return o.dispose(),e.dispose(),n&&(a.background=t.texture),a.environment=t.texture,function(){a.environment=a.background=null}}),[o]),null}function y(e){var t=e.tokenId,n=e.noteString,a=void 0===n?"":n,l=e.autoRotate,d=void 0===l||l,h=e.fov,f=void 0===h?20:h,v=(0,u.useState)(!1);v[0],v[1];return(0,r.jsxs)(c.Xz,{dpr:[1,2],shadows:!0,camera:{position:[0,0,10],fov:f},gl:{antialias:!0},children:[(0,r.jsx)("ambientLight",{intensity:.6}),(0,r.jsx)("directionalLight",{position:[2.5,3,3],intensity:.5}),(0,r.jsx)("directionalLight",{position:[1,16,2],intensity:.2}),(0,r.jsx)("directionalLight",{position:[15,20,15],intensity:.2}),(0,r.jsx)("directionalLight",{position:[15,-20,15],intensity:.2}),(0,r.jsx)("directionalLight",{position:[-1,10,-2],intensity:.1}),(0,r.jsxs)(u.Suspense,{fallback:(0,r.jsx)(o.V,{className:"hero text-xs",children:"Loading.."}),children:[(0,r.jsx)(g,{}),(0,r.jsx)(m,{dateString:(0,i.nv)(t),noteString:a||""})]}),(0,r.jsx)(s.z,{autoRotate:d,enablePan:!1,enableZoom:!1,minDistance:8,maxDistance:10,minPolarAngle:Math.PI/2-Math.PI/10,maxPolarAngle:Math.PI/2+Math.PI/10})]})}},8620:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(4776),i=n.n(r),a=n(2322),o=n(2784),s=n(5538),c=n(263);function u(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function l(e){var t,n=e.tokenId,r=(0,c.Z)(),l=(0,o.useState)(void 0),d=l[0],h=l[1];return(0,s.Z)((t=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r){e.next=2;break}return e.abrupt("return");case 2:return e.t0=h,e.next=5,null===r||void 0===r?void 0:r.generateSVGImage(n);case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(e){u(a,r,i,o,s,"next",e)}function s(e){u(a,r,i,o,s,"throw",e)}o(void 0)}))}),[r]),(0,a.jsx)("div",{dangerouslySetInnerHTML:{__html:d||""}})}},2041:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(4776),i=n.n(r),a=n(2322),o=n(2695),s=n(8258),c=n(263),u=n(3710),l=n(8620),d=n(2784),h=n(5538),f=n(5632),v=n(4107),x=n(1906);function p(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function m(e){var t,n=(0,u.Z)(),r=n.library,a=n.chainId,o=(n.account,(0,c.Z)()),s=(0,d.useState)(void 0),l=s[0],f=s[1],m=(0,d.useState)(void 0),g=m[0],y=m[1],j=(0,d.useState)(void 0),b=j[0],w=j[1],k=(0,d.useState)(void 0),S=k[0],P=k[1],I=(0,d.useState)(void 0),N=I[0],M=I[1],D=(0,d.useState)(void 0),T=D[0],Z=D[1],C=(0,d.useState)(void 0),E=C[0],_=C[1];return(0,h.Z)((t=i().mark((function t(){var n,a,s,c,u,l,d;return i().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r&&o){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,t.next=5,o.exists(e);case 5:if(n=t.sent,P(n),n){t.next=9;break}return t.abrupt("return");case 9:return t.next=11,o.ownerOf(e);case 11:return a=t.sent,f(a),t.next=15,o.getNote(e);case 15:return s=t.sent,t.next=18,o.getHighestBid(e);case 18:return c=t.sent,u=c.bidder,l=c.amount,M(u),Z(l),y((0,v.nv)(e)),w(s),a&&a!==x.d?P(!0):P(!1),t.next=28,r.getBlock(r.blockNumber);case 28:d=t.sent.timestamp,_(d>(e+1)*v.K5),t.next=35;break;case 32:return t.prev=32,t.t0=t.catch(2),t.abrupt("return");case 35:case"end":return t.stop()}}),t,null,[[2,32]])})),function(){var e=this,n=arguments;return new Promise((function(r,i){var a=t.apply(e,n);function o(e){p(a,r,i,o,s,"next",e)}function s(e){p(a,r,i,o,s,"throw",e)}o(void 0)}))}),[r,a,o]),(0,d.useMemo)((function(){return{exists:S,owner:l,dateString:g,noteString:b,auctionEnded:E,highestBidder:N,highestBid:T}}),[g,S,b,l,E,N,T])}var g=n(9097),y=n(3137),j=n(3003),b=n(7327);function w(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function k(e){return function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){w(a,r,i,o,s,"next",e)}function s(e){w(a,r,i,o,s,"throw",e)}o(void 0)}))}}function S(e){var t=e.tokenId,n=e.editable,r=void 0!==n&&n,o=(0,j.Ge)(),u=o.account,l=o.activate,h=(0,c.Z)(),f=m(t),x=f.exists,p=f.owner,w=f.dateString,S=f.noteString,P=f.highestBidder,I=f.auctionEnded,N=(0,d.useRef)(null);return(0,a.jsxs)(a.Fragment,{children:[void 0!==x&&void 0!=p&&void 0!==w&&void 0!==S&&(x?(0,a.jsxs)("div",{children:[(0,a.jsx)("h3",{children:"Profile of The Date:"}),(0,a.jsxs)("p",{children:["Token ID: "," ",(0,a.jsx)(g.default,{href:"/artwork/".concat(t),children:(0,a.jsxs)("a",{className:"hover:link",children:["#",t]})}),(0,a.jsx)("br",{}),"Date:"," ",(0,a.jsx)(g.default,{href:"/artwork/".concat(t),children:(0,a.jsx)("a",{className:"hover:link",children:(0,v.tQ)(t)})}),(0,a.jsx)("br",{}),"Owner:"," ",p===(null===h||void 0===h?void 0:h.address)?I?r&&P===u?(0,a.jsx)("button",{className:"link",children:"Claim your artwork"}):(0,a.jsx)(g.default,{href:"/artwork/".concat(t),children:(0,a.jsx)("a",{className:"link",children:"Not claimed yet"})}):(0,a.jsx)(a.Fragment,{children:"Auction not ended yet"}):(0,a.jsx)(g.default,{href:"/gallery/".concat(p),children:(0,a.jsxs)("a",{className:"hover:link",children:[(0,s.pm)(p)," ",u===p&&" (you)"]})}),(0,a.jsx)("br",{}),"Note: ",S.length>0?(0,a.jsx)("span",{className:"text-neutral-focus",children:S}):"(unengraved)"]}),r&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"pt-10",children:"Interact with The Date:"}),void 0===u?(0,a.jsx)("p",{children:(0,a.jsxs)("span",{className:"wallet",children:[(0,a.jsx)("button",{onClick:function(){l(y.Lj)},children:"Connect your Metamask"})," before engraving or erasing note. "]})}):u!==p?(0,a.jsx)("p",{children:"Only owner can interact with The Date."}):(0,a.jsxs)("p",{children:[0==S.length&&(0,a.jsxs)(a.Fragment,{children:["Input a note to engrave on The Date:",(0,a.jsx)("br",{}),(0,a.jsx)("input",{ref:N,type:"text",maxLength:100,className:"user-input w-96 sm:w-120",placeholder:"(printable characters at max 100 bytes)"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("button",{onClick:k(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==h&&void 0!==h){e.next=4;break}e.next=12;break;case 4:return e.t0=h,e.t1=t,e.t2=N.current.value,e.next=9,null===h||void 0===h?void 0:h.engravingPrice();case 9:e.t3=e.sent,e.t4={value:e.t3},e.t0.engraveNote.call(e.t0,e.t1,e.t2,e.t4);case 12:case"end":return e.stop()}}),e)}))),children:"Click here to engrave note at price \u039e0.05"})]}),S.length>0&&(0,a.jsx)("button",{onClick:k(i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==h&&void 0!==h){e.next=4;break}e.next=11;break;case 4:return e.t0=h,e.t1=t,e.next=8,null===h||void 0===h?void 0:h.erasingPrice();case 8:e.t2=e.sent,e.t3={value:e.t2},e.t0.eraseNote.call(e.t0,e.t1,e.t3);case 11:case"end":return e.stop()}}),e)}))),children:"Click here to erase note at price \u039e0.1"})]})]}),(0,a.jsx)("h3",{className:"pt-10",children:"Artworks based on The Date"}),(0,a.jsx)("div",{className:"artwork-3d",children:(0,a.jsx)(b.Z,{tokenId:t,noteString:S,fov:30})}),(0,a.jsx)("p",{children:(0,a.jsx)(g.default,{href:"/model/".concat(t),children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",children:"Click here to open the 3D Model in full screen."})})})]}):(0,a.jsx)("div",{children:"No artwork exists"}))," "]})}var P=n(1616);function I(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(u){return void n(u)}s.done?t(c):Promise.resolve(c).then(r,i)}function N(){var e,t=(0,f.useRouter)(),n=(0,u.Z)().chainId,r=(0,c.Z)(),v=t.query.tokenId,x="string"===typeof v?Number(v):void 0,p=(0,d.useState)(void 0),m=p[0],g=p[1];return(0,h.Z)((e=i().mark((function e(){return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r&&void 0!==x){e.next=2;break}return e.abrupt("return");case 2:return e.t0=g,e.next=5,null===r||void 0===r?void 0:r.exists(x);case 5:e.t1=e.sent,(0,e.t0)(e.t1);case 7:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,i){var a=e.apply(t,n);function o(e){I(a,r,i,o,s,"next",e)}function s(e){I(a,r,i,o,s,"throw",e)}o(void 0)}))}),[r,x]),void 0===x||void 0===m?(0,a.jsx)(o.Z,{children:(0,a.jsx)("div",{className:"content text-center",children:"Loading..."})}):m?(0,a.jsx)(o.Z,{children:(0,a.jsxs)("div",{className:"content",children:[(0,a.jsx)("figure",{children:(0,a.jsx)("a",{target:"_blank",rel:"noreferrer",href:(0,s.dl)("Asset",n,P.S.contract_address,x),children:(0,a.jsx)(l.Z,{tokenId:x})})}),(0,a.jsx)("div",{className:"content-item text-left max-w-md mx-auto",children:(0,a.jsx)(S,{tokenId:x,editable:!0})})]})}):(0,a.jsx)(o.Z,{children:(0,a.jsx)("div",{className:"content text-center",children:"Error - Token ID does not exist."})})}},4107:function(e,t,n){"use strict";n.d(t,{K5:function(){return i},xe:function(){return a},fB:function(){return o},nv:function(){return s},tQ:function(){return c}});var r=n(1280),i=86400;function a(e){return(0,r.ZP)(new Date(1e3*e),"UTC:mmm d yyyy HH:MM:ss Z")}function o(e){return Math.floor(new Date(e).valueOf()/i/1e3)}function s(e){return(0,r.ZP)(new Date(e*i*1e3),"mmm d yyyy").toUpperCase()}function c(e){return(0,r.ZP)(new Date(e*i*1e3),"yyyy-mm-dd")}},5632:function(e,t,n){e.exports=n(3642)}},function(e){e.O(0,[546,106,171,599,695,263,774,888,179],(function(){return t=1679,e(e.s=t);var t}));var t=e.O();_N_E=t}]);